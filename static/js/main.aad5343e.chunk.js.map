{"version":3,"sources":["components/Map/index.js","pages/Chart/index.js","routes.js","App.js","index.js"],"names":["Map","useState","selectedCity","setSelectedCity","margin","useEffect","console","log","useLayoutEffect","updateSize","resizeMap","document","getElementById","clientWidth","clientHeight","window","addEventListener","removeEventListener","divWidth","divHeight","width","d3","attr","data","citiesCodinates","height","svg","append","projection","center","translate","scale","path","cities","topojson","objects","features","selectAll","enter","on","this","classed","d","city","find","c","ibgeCode","properties","cod","nodes","forEach","s","createMap","mapTopology","citiesCordinates","id","Chart","className","Routes","component","App","ReactDOM","render","StrictMode"],"mappings":"6omWAce,SAASA,IAAO,IAAD,EAEYC,mBAAS,IAFrB,mBAErBC,EAFqB,KAEPC,EAFO,KAItBC,EAAgB,GAAhBA,EAA0B,GAA1BA,EAAqC,GAArCA,EAAiD,GAEvDC,qBAAU,WAERC,QAAQC,IAAIL,KAEX,CAACA,IAEJM,2BAAgB,WACd,SAASC,IAEPC,EACEC,SAASC,eAAe,OAAOC,YAC/BF,SAASC,eAAe,OAAOE,cAKnC,OAFAC,OAAOC,iBAAiB,SAAUP,GAClCA,IACO,kBAAMM,OAAOE,oBAAoB,SAAUR,OAGpD,IAAIC,EAAY,SAACQ,EAAUC,GACzB,IAAIC,EAAQF,EAAWd,EAAcA,EAErCiB,IAAU,KAAKC,KAAK,YAAa,SAAWF,EAAQ,IAAM,MAsE5D,OATAf,qBAAU,YA1DM,SAACa,EAAUC,EAAWI,EAAMC,GAE1C,IAAIC,EAASN,EAAYf,EAAaA,EACpCgB,EAAQF,EAAWd,EAAcA,EAE/BsB,EAAML,IAAU,QACjBM,OAAO,OACPL,KAAK,SAAUG,EAASrB,EAAaA,GACrCkB,KAAK,QAASF,EAAQhB,EAAcA,GACpCuB,OAAO,KACPL,KAAK,YALE,oBAKwBlB,EALxB,aAKwCA,EALxC,MAQNwB,EAAaP,MACdQ,OAAO,EAAE,MAAQ,QACjBC,UAAU,CAACV,EAAQ,EAAGK,EAAS,IAC/BM,MAAM,KAELC,EAAOX,MACRO,WAAWA,GAEVK,EAASC,IAAiBX,EAAMA,EAAKY,QAAQ,KAAOC,SAExDV,EAAIW,UAAU,SACXd,KAAKU,GACLK,QAAQX,OAAO,QACfL,KAAK,QAAS,QACdA,KAAK,IAAKU,GACVO,GAAG,aAAa,WACflB,IAAUmB,MAAMC,QAAQ,gBAAgB,MACvCF,GAAG,YAAY,WAChBlB,IAAUmB,MAAMC,QAAQ,gBAAgB,MAEzCF,GAAG,SAAS,SAAUG,GACrB,IAAIC,EAAOnB,EAAgBoB,MAAK,SAAAC,GAAC,OAAIA,EAAEC,WAAaJ,EAAEK,WAAWC,OACjE7C,EAAgBwC,GACAtB,IAAU,QAAQgB,UAAU,uBAClCY,QAAQC,SAAQ,SAACC,GACzB9B,IAAU8B,GAAGV,QAAQ,iBAAiB,MAExCpB,IAAUmB,MAAMC,QAAQ,iBAAiB,MAmB7CW,CACEzC,SAASC,eAAe,OAAOC,YAC/BF,SAASC,eAAe,OAAOE,aAC/BuC,EACAC,MAKF,yBAAKC,GAAG,Q,MC3GG,SAASC,IACtB,OACE,yBAAKC,UAAU,aACb,yBAAKA,UAAU,mBACb,kBAACzD,EAAD,OAEF,yBAAKyD,UAAU,qBACb,yBAAKA,UAAU,WACb,uBAAGA,UAAU,SAAb,kBAGA,yBAAKA,UAAU,WACb,yBAAKA,UAAU,gBACb,yBAAKA,UAAU,eAAf,sBAGA,yBAAKA,UAAU,SAAf,QAIF,yBAAKA,UAAU,gBACb,yBAAKA,UAAU,eAAf,WAGA,yBAAKA,UAAU,SAAf,WCzBC,SAASC,IACtB,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAO1B,KAAK,IAAI2B,UAAWH,MCGpBI,MANf,WACE,OACC,kBAACF,EAAD,OCJHG,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFpD,SAASC,eAAe,W","file":"static/js/main.aad5343e.chunk.js","sourcesContent":["import React, { useEffect, useLayoutEffect, useState } from 'react';\n\nimport * as d3 from 'd3'\nimport * as topojson from \"topojson-client\";\n\nimport citiesCordinates from '../../data/cities-codinates.json';\nimport mapTopology from '../../data/map.json';\n\n\n\nimport './style.css'\n\n\n\nexport default function Map() {\n\n  const [selectedCity, setSelectedCity] = useState('');\n\n  const margin = { top: 50, left: 50, right: 50, bottom: 50 };\n\n  useEffect(() => {\n\n    console.log(selectedCity)\n    \n  }, [selectedCity]);\n\n  useLayoutEffect(() => {\n    function updateSize() {\n\n      resizeMap(\n        document.getElementById('map').clientWidth,\n        document.getElementById('map').clientHeight\n      )\n    }\n    window.addEventListener('resize', updateSize);\n    updateSize();\n    return () => window.removeEventListener('resize', updateSize);\n  });\n\n  let resizeMap = (divWidth, divHeight) => {\n    let width = divWidth - margin.left - margin.right;\n\n    d3.select(\"g\").attr(\"transform\", \"scale(\" + width / 900 + \")\");\n  }\n\n  var createMap = (divWidth, divHeight, data, citiesCodinates) => {\n\n    let height = divHeight - margin.top - margin.bottom,\n      width = divWidth - margin.left - margin.right;\n\n    let svg = d3.select('#map')\n      .append('svg')\n      .attr('height', height + margin.top + margin.bottom)\n      .attr('width', width + margin.left + margin.right)\n      .append('g')\n      .attr('transform', `translate(${margin.left}, ${margin.right})`);\n\n\n    let projection = d3.geoMercator()\n      .center([-50.80, -27.61])\n      .translate([width / 2, height / 2])\n      .scale(10000)\n\n    let path = d3.geoPath()\n      .projection(projection);\n\n    let cities = topojson.feature(data, data.objects['42']).features;\n\n    svg.selectAll('.city')\n      .data(cities)\n      .enter().append('path')\n      .attr('class', 'city')\n      .attr('d', path)\n      .on('mouseover', function () {\n        d3.select(this).classed('city-hovered', true)\n      }).on('mouseout', function () {\n        d3.select(this).classed('city-hovered', false)\n      })\n      .on('click', function (d) {\n        let city = citiesCodinates.find(c => c.ibgeCode === d.properties.cod)\n        setSelectedCity(city)\n        let selecteds = d3.select('#map').selectAll('.city.city-selected')\n        selecteds.nodes().forEach((s) => {\n          d3.select(s).classed('city-selected', false)\n        })\n        d3.select(this).classed('city-selected', true)\n      })\n\n    /**svg.selectAll('.city-circle')\n      .data(citiesCodinates)\n      .enter().append(\"circle\")\n      .attr(\"r\", 4)\n      .attr(\"cx\", function(c){\n        var coords = projection([c.latLng.lng, c.latLng.lat]);\n        return coords[0]\n      })\n      .attr(\"cy\", function(c){\n        var coords = projection([c.latLng.lng, c.latLng.lat]);\n        return coords[1]\n      })\n      **/\n  }\n\n  useEffect(() => {\n    createMap(\n      document.getElementById('map').clientWidth,\n      document.getElementById('map').clientHeight,\n      mapTopology,\n      citiesCordinates\n    )\n  });\n\n  return (\n    <div id=\"map\"></div>\n  )\n}","import React from 'react';\n\nimport Map from '../../components/Map'\n\nimport './style.css'\n\nexport default function Chart() {\n  return (\n    <div className=\"container\">\n      <div className=\"chart-container\">\n        <Map />\n      </div>\n      <div className=\"details-container\">\n        <div className=\"details\">\n          <p className=\"title\">\n            Santa Catarina\n          </p>\n          <div className=\"summary\">\n            <div className=\"summary-item\">\n              <div className=\"description\">\n                Casos confirmados:\n              </div>\n              <div className=\"value\"> \n                999\n              </div>\n            </div>\n            <div className=\"summary-item\">\n              <div className=\"description\">\n                Obitos:\n              </div>\n              <div className=\"value\">\n                10\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}","import React from 'react'\nimport { BrowserRouter, Switch, Route } from 'react-router-dom';\n\nimport Chart from './pages/Chart'\n\nexport default function Routes() {\n  return (\n    <BrowserRouter>\n      <Switch>\n        <Route path=\"/\" component={Chart}/>\n      </Switch>\n    </BrowserRouter>\n  );\n}","import React from 'react';\n\nimport './global.css'\n\nimport Routes from './routes'\n\nfunction App() {\n  return (\n   <Routes />\n  );\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}